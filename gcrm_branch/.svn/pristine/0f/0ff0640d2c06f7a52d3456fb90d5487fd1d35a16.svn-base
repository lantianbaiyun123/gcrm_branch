define(["app"],function(t){t.registerController("CtrlCustomerAttachment",["$scope","$state","$stateParams","$timeout","$log","Modal","Customer","$window",function(t,a,e,n,c,s,o){var i=0;t.beginUpload=function(){i=t.attachment.attachments.length},t.uploaded=function(){n(function(){for(var a=t.attachment.attachments,e=i;e<a.length;e++)a[e].type=t.attachment.addType,a[e].isEditing=!0,t.basic.id&&(a[e].customerNumber=t.basic.id)})},t.removeRow=function(a,e){t.attachment.attachments&&t.attachment.attachments.length&&(a.id&&-1!==a.id?o.removeAttachment(a).success(function(a){200===a.code&&(t.attachment.attachments&&t.attachment.attachments.length&&t.attachment.attachments.splice(e,1),t.customerApplyInfo.approveState="saving",t.basic.companyStatus=0)}):t.attachment.attachments.splice(e,1))},t.editRow=function(t){t.isEditing=!0},t.saveRow=function(a){o.saveOrUpdateAttachment(a).success(function(e){200===e.code&&(angular.extend(a,e.data,{isEditing:!1}),t.customerApplyInfo.approveState="saving",t.basic.companyStatus=0)})}}])});