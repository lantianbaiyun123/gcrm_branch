define(["app","../../_services/http/Customer"],function(e){e.registerFactory("SalesTransferModal",["$q","$modal","STATIC_DIR",function(e,t,s){return{show:function(r){var n=e.defer(),o={},a=t.open({templateUrl:s+"app/customer/list/salesTransferModal.tpl.html",controller:"CtrlSalesTransfer",windowClass:"sales-transfer-modal",backdrop:"static",resolve:{opts:function(){return angular.extend(o,r)}}});return a.result.then(function(e){"ok"===e.btnType&&n.resolve(e.response)}),n.promise}}}]),e.registerController("CtrlSalesTransfer",["$scope","$log","$modalInstance","$filter","$q","Utils","Customer","opts",function(e,t,s,r,n,o,a,l){function i(){return t.info(e.customerData),!!e.customerData.newSales.id}function c(){var t={};return t.customerId=e.customerData.customerId,t.salesId=e.customerData.newSales.id,t}e.title=l.title,e.customerData=l.customerData,e.salesSelect2=a.getBelongSalesSuggestOption(),e.cancel=function(){s.dismiss("cancel")},e.ok=function(){if(e.submitDisabled=!0,i()){var t=c(),r=a.salesTransfer(t);r.success(function(e){200===e.code&&s.close({btnType:"ok",response:e})}),r["finally"](function(){e.submitDisabled=!1})}else e.submitDisabled=!1}}])});