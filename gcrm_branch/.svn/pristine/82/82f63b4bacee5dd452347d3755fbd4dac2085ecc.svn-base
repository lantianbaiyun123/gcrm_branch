define(["app"],function(t){t.registerDirective("ytScheduleTable",["$log",function(){return{restrict:"A",scope:{scrollEnd:"&",scrollToMonth:"&",scrollPosition:"=",colIndex:"=",shiftKey:"=",adContentKey:"=",inputClicked:"&",rowIndex:"=",ownerClicked:"&",readOnly:"="},link:function(t,e,l){var o=e[0];l.$observe("activeMonthPosition",function(t){t>-1&&(o.scrollLeft=t)}),e.bind("scroll",function(){o.scrollLeft+o.clientWidth+1>=o.scrollWidth&&t.scrollEnd(),t.scrollToMonth({scrollPosition:o.scrollLeft})});e.bind("click",function(e){if($(e.target).is("input")){var l=$(e.target).closest("td").index();t.inputClicked({colIndex:l-1,adContentKey:$(e.target).closest("tr").attr("ad-content-key"),shiftKey:e.shiftKey})}else!t.readOnly&&$(e.target).closest("td").hasClass("headcol")&&($(e.target).closest("tr").siblings().removeClass("selected"),$(e.target).closest("tr").addClass("selected"),t.ownerClicked({adContentKey:$(e.target).closest("tr").attr("ad-content-key")}))})}}}])});