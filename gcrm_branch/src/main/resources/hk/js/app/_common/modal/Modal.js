define(["app"],function(t){t.registerFactory("Modal",["$modal","$timeout","$filter","GCRMUtil","STATIC_DIR",function(t,n,o,e,l){return{alert:function(e,r){var a,c={title:o("translate")("ALERT"),content:""};n(function(){a=t.open({templateUrl:l+"app/_common/modal/modal.tpl.html",controller:"CtrlModal",windowClass:"ngAlert "+e.ngClass,resolve:{opts:function(){return angular.extend(c,e)}}}),r&&a.result.then(function(){r()},function(){r()})},0)},confirm:function(n,e){var r={title:o("translate")("CONFIRM"),content:"",showCancel:!0},a=t.open({templateUrl:l+"app/_common/modal/modal.tpl.html",controller:"CtrlModal",windowClass:"ngConfirm",resolve:{opts:function(){return angular.extend(r,n)}}});a.result.then(function(t){"ok"===t&&e()})},success:function(o,e){var r={title:"",content:""},a=t.open({templateUrl:l+"app/_common/modal/successModal.tpl.html",controller:"CtrlModal",windowClass:"successModal",resolve:{opts:function(){return angular.extend(r,o)}}});n(function(){a.dismiss("cancel"),e&&e()},o.timeOut||2e3)},error:function(n){{var e={title:o("translate")("ALERT")};t.open({templateUrl:l+"app/_common/modal/errorModal.tpl.html",controller:"CtrlModal",resolve:{opts:function(){return angular.extend(e,n)}}})}},showError:function(t){var n,o=[];angular.forEach(t,function(t,l){n=[],angular.forEach(t,function(t){n.push(t)}),o.push({typeName:e.decodeGCRMMessageSingle(l),list:n})}),this.error({errors:o})}}}])});