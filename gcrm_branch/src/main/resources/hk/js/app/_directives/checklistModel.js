define(["app"],function(e){e.registerDirective("checklistModel",["$parse","$compile",function(e,r){function t(e,r){if(angular.isArray(e))for(var t=0;t<e.length;t++)if(angular.equals(e[t],r))return!0;return!1}function n(e,r){e=angular.isArray(e)?e:[];for(var t=0;t<e.length;t++)if(angular.equals(e[t],r))return e;return e.push(r),e}function a(e,r){if(angular.isArray(e))for(var t=0;t<e.length;t++)if(angular.equals(e[t],r)){e.splice(t,1);break}return e}function c(c,i,l){r(i)(c);var u=e(l.checklistModel),o=u.assign,s=e(l.checklistValue)(c.$parent);c.$watch("checked",function(e,r){if(e!==r){var t=u(c.$parent);e===!0?o(c.$parent,n(t,s)):o(c.$parent,a(t,s))}}),c.$parent.$watch(l.checklistModel,function(e){c.checked=t(e,s)},!0)}return{restrict:"A",priority:1e3,terminal:!0,scope:!0,compile:function(e,r){if("INPUT"!==e[0].tagName||!e.attr("type","checkbox"))throw'checklist-model should be applied to `input[type="checkbox"]`.';if(!r.checklistValue)throw"You should provide `checklist-value`.";return e.removeAttr("checklist-model"),e.attr("ng-model","checked"),c}}}])});