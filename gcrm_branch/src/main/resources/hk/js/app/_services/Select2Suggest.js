define(["app","./http/Account","./http/Customer","./http/Contract"],function(t){t.registerFactory("Select2Suggest",["$timeout","Account","Customer","Contract","$filter","Position",function(t,e,n,a,r,l){return{getOperatorOption:function(t){var n={},a=angular.extend(n,t);return{id:function(t){return t.value},placeholder:r("translate")("SELECTTOSUGGEST_OPERATOR"),minimumInputLength:1,formatInputTooShort:function(t,e){return r("translate")("SELECTTOSUGGEST_PLACEINPUT")+" "+e+" "+r("translate")("SELECTTOSUGGEST_CHARACTERS")},query:function(t){var n={results:[]};e.get({query:$.trim(t.term)}).success(function(e){e.data&&(n.results=e.data,t.callback(n))})},formatNoMatches:function(){return r("translate")("SELECTTOSUGGEST_NO_OPERATOR")},formatResult:function(t){return t.data.name},formatSelection:function(t){return a&&a.formatSelectionCallback&&a.formatSelectionCallback(t),t.data.name},width:"element",initSelection:function(t,e){a&&a.initSelectionCallback&&a.initSelectionCallback(t,e)}}},getCustomerOption:function(t){var e={},a=angular.extend(e,t);return{id:function(t){return t.value},placeholder:a&&a.placeholder||r("translate")("SELECTTOSUGGEST_INPUT_COMPANY"),minimumInputLength:1,formatInputTooShort:function(t,e){return r("translate")("SELECTTOSUGGEST_PLACEINPUT")+" "+e+" "+r("translate")("SELECTTOSUGGEST_CHARACTERS")},query:function(t){var e={results:[]};t.term&&n.getSuggest({query:$.trim(t.term)},function(n){n.length&&(e.results=n),t.callback(e)})},formatNoMatches:function(){return r("translate")("SELECTTOSUGGEST_NO_COMPANY")},formatResult:function(t){return t.value},formatSelection:function(t){return a&&a.formatSelectionCallback&&a.formatSelectionCallback(t),t.value},width:"element",allowClear:function(){return a&&a.allowClear?a.allowClear:!1}()}},getContractOption:function(t,e){var n={},l=angular.extend(n,e);return{dropdownCssClass:"tableDrop",dropdownAutoWidth:!0,id:function(t){return t.value},placeholder:r("translate")("SELECTTOSUGGEST_INPUT_AGREEMENT_NUMBER"),formatInputTooShort:function(t,e){return r("translate")("SELECTTOSUGGEST_PLACEINPUT")+" "+e+" "+r("translate")("SELECTTOSUGGEST_CHARACTERS")},query:function(e){var n={results:[]},r={};a.get({query:$.trim(e.term),customerNumber:t.basic.customerSelected.data},function(t){t.length?(n.results=t,n.results.unshift(r),e.callback(n)):e.callback(n)})},formatNoMatches:function(){return r("translate")("SELECTTOSUGGEST_NO_AGREEMENT_NUMBER")},formatResult:function(t){return t.data?'<div class="bodyDrop"><span class="dropCol1">'+t.data.number+'</span><span class="dropCol2">'+r("translate")("CONTRACT_CATEGORY_"+t.data.category)+'</span><span class="dropCol3">'+t.data.summary+"</span></div>":'<div class="headDrop"><span class="dropCol1">'+r("translate")("SELECTTOSUGGEST_CONTRACT_NUMBER")+'</span><span class="dropCol2">'+r("translate")("SELECTTOSUGGEST_CONTRACT_TYPE")+'</span><span class="dropCol3">'+r("translate")("SELECTTOSUGGEST_SUMMARY")+"</span></div>"},formatSelection:function(t){return l&&l.formatSelectionCallback&&l.formatSelectionCallback(t),t.data?t.data.number:""},escapeMarkup:function(t){return t}}},getCustomerOptionForAdOwner:function(t){var e={},a=angular.extend(e,t);return{id:function(t){return t.value},placeholder:r("translate")("SELECTTOSUGGEST_INPUT_ADVERTISER_NAME"),minimumInputLength:1,formatInputTooShort:function(t,e){return r("translate")("SELECTTOSUGGEST_PLACEINPUT")+" "+e+" "+r("translate")("SELECTTOSUGGEST_CHARACTERS")},query:function(t){var e={results:[]};n.getSuggestForAdOwner({query:$.trim(t.term)},function(n){n.length&&(e.results=n),a.allowInput&&!e.results.length&&e.results.push({value:$.trim(t.term)}),t.callback(e)})},formatNoMatches:function(){return r("translate")("SELECTTOSUGGEST_NO_ADVERTISER_NAME")},formatResult:function(t){return t.data?t.value:t.value+"（"+r("translate")("SELECTTOSUGGEST_NO_ADVERTISER_NAME")+"）"},formatSelection:function(t){return a&&a.formatSelectionCallback&&a.formatSelectionCallback(t),t.value},width:"element",allowClear:function(){return a&&a.allowClear?a.allowClear:!1}()}},getBenchmarkPriceSubmitter:function(t){var n={},a=angular.extend(n,t);return{id:function(t){return t.value},placeholder:r("translate")("SELECTTOSUGGEST_INPUT_OPERATOR_NAME"),minimumInputLength:1,formatInputTooShort:function(t,e){return r("translate")("SELECTTOSUGGEST_PLACEINPUT")+" "+e+" "+r("translate")("SELECTTOSUGGEST_CHARACTERS")},query:function(t){var n={results:[]};e.get({query:$.trim(t.term)}).success(function(e){if(e.data){n.results=e.data;for(var a=n.results.length-1;a>=0;a--)n.results[a].value=n.results[a].data.ucid;t.callback(n)}})},formatNoMatches:function(){return r("translate")("SELECTTOSUGGEST_NO_SUBMITTER")},formatResult:function(t){return t.data.name},formatSelection:function(t){return a&&a.formatSelectionCallback&&a.formatSelectionCallback(t),t.data.name},width:"element",initSelection:function(t,e){a&&a.initSelectionCallback&&a.initSelectionCallback(t,e)},allowClear:!0}},positionNumSuggest:function(t){var e={},n=angular.extend(e,t);return{id:function(t){return t.value},placeholder:r("translate")("SELECTTOSUGGEST_POSITION_NAME"),minimumInputLength:1,formatInputTooShort:function(t,e){return r("translate")("SELECTTOSUGGEST_PLACEINPUT")+" "+e+" "+r("translate")("SELECTTOSUGGEST_CHARACTERS")},query:function(t){var e={results:[]};l.positionSuggest({query:$.trim(t.term)}).success(function(n){n.data&&(e.results=n.data,t.callback(e))})},formatNoMatches:function(){return r("translate")("SELECTTOSUGGEST_NO_POSITION_NAME")},formatResult:function(t){return t.value},formatSelection:function(t){return n&&n.formatSelectionCallback&&n.formatSelectionCallback(t),t.value},width:"element",initSelection:function(t,e){n&&n.initSelectionCallback&&n.initSelectionCallback(t,e)},allowClear:!0}},getUserOption:function(t){var n={},a=angular.extend(n,t);return{id:function(t){return t.id},placeholder:r("translate")("SELECTTOSUGGEST_RESPONSIBLE_HANDLER"),minimumInputLength:1,formatInputTooShort:function(t,e){return r("translate")("SELECTTOSUGGEST_PLACEINPUT")+" "+e+" "+r("translate")("SELECTTOSUGGEST_CHARACTERS")},query:function(t){var n={results:[]};e.suggestUser({userName:$.trim(t.term)}).success(function(e){e.data&&(n.results=e.data,t.callback(n))})},formatNoMatches:function(){return r("translate")("SELECTTOSUGGEST_NO_USER")},formatResult:function(t){return t.realname+"("+t.username+")"},formatSelection:function(t){return(a.onSelect||angular.noop)(t),t.realname+"("+t.username+")"},width:"element"}}}}])});