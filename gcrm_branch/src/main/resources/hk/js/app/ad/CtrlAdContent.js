define(["app","../_services/Select2Suggest","../_common/ytCommon","../_directives/ytJqueryFileUpload","../_directives/ytAjaxupload","../record/SolutionApprovalRecord","../gcrm-util","../_filters/IndustryTypeFilter","../_filters/PortionFilter"],function(t){t.registerController("CtrlAdContent",["$scope","Ad","$stateParams","Customer","Select2Suggest","$filter","Industry","$log","$timeout",function(t,a,e,o,i){t.optionCustomer=i.getCustomerOptionForAdOwner({allowInput:!0})}]),t.registerController("CtrlAdContentItem",["$scope","$filter","Modal","BillModel","Ad","PublishPrice","GCRMUtil","SolutionApprovalRecord","Industry","Utils","$timeout","$log","Position",function(t,a,e,o,i,d,n,r,s,u,l,c,p){function m(t,a,e){var o=0;if(t=t||[],3==arguments.length){for(;o<t.length;o++)if(t[o].id==a)return t[o][e]?t[o][e]:""}else for(;o<t.length;o++)if(t[o].id==a)return t[o]}t.stateCustomerStraight&&(t.ad.CustomersName=t.customerStraight),t.ad.quotes=t.ad.quotes||{},t.ad.quotes.quoteTatioThird=0,t.ad.quotes.reachEstimate="0",t.ad.timeBuckets=[{fromMinDate:new Date,toMinDate:new Date}],t.ad.adDaysEles=[];var q=function(a,e,o){function d(t){for(var a=t.length-1;a>=0;a--)t[a].from&&t[a].to?(angular.isDate(t[a].from)&&(t[a].from=t[a].from.getTime()),angular.isDate(t[a].to)&&(t[a].to=t[a].to.getTime())):t.splice(a,1)}d(e);var n={positionId:a.id,periods:e,insertDate:o};t.ad.oldContentId&&(n=angular.extend(n,{oldContentId:t.ad.oldContentId})),i.queryInsertDates(n).success(function(a){if(200===a.code){t.ad.timeBuckets=a.data.datePeriod,t.ad.adDaysEles=a.data.insertDate,t.ad.totalDays=a.data.totalDays;var e=0;if(t.ad.adDaysEles){for(var o=t.ad.adDaysEles.length,i=t.ad.adDaysEles.length-1;i>=0;i--)t.ad.adDaysEles[i].checked?e++:o&&(o=!1);t.ad.adTimeCheckallModel=!!o}var d=t.ad.timeBuckets;if(d&&d.length)for(var n=d.length-1;n>=0;n--)d[n].toMaxDate=a.data.maxDate,d[n].fromMaxDate=d[n].to,d[n].fromMinDate=new Date,d[n].toMinDate=d[n].from;else t.ad.timeBuckets=[{}];t.insertDays=e}})};t.addTimeBuckets=function(a){a.adTimeCheckallModel=!1,t.ad.positionChangeValidator=!1,t.ad.timeBuckets.push({fromMinDate:new Date,toMinDate:new Date})},t.delTimeBuckets=function(a,e,o){return t.ad.calendarFutureOnly&&a.from<u.getTodayZero().getTime()?!1:(t.ad.timeBuckets.length>o&&t.ad.timeBuckets.splice(o,1),a.from&&a.to?void q(e.positionByAreaSelection,t.ad.timeBuckets,t.ad.adDaysEles):!1)},t.adTimeCheckall=function(a){var e=0;angular.forEach(t.ad.adDaysEles,function(t){t.checked=a,t.checked&&e++}),t.insertDays=e},t.adTimeCancelCheckall=function(a,e){a.checked=!a.checked;var o=!!t.ad.adDaysEles.length,i=0;angular.forEach(t.ad.adDaysEles,function(t){t.checked?i++:o=!1}),t.insertDays=i,e.adTimeCheckallModel=o},t.startTimeChange=function(a,e){a.adTimeCheckallModel=!1;var o=t.ad.timeBuckets[e];o.toMinDate=new Date(o.from).getTime(),o.to&&q(a.positionByAreaSelection,t.ad.timeBuckets,t.ad.adDaysEles)},t.endTimeChange=function(a,e){a.adTimeCheckallModel=!1;var o=t.ad.timeBuckets[e];o.fromMaxDate=new Date(o.to).getTime(),o.from&&q(a.positionByAreaSelection,t.ad.timeBuckets,t.ad.adDaysEles)},t.ad.selection="",p.getPlatformList4Radio({id:1}).success(function(a){if("200"==a.code)if(t.ad.products=a.data,t.ad.products.length>1);else{var e=t.ad.products[0].id;C(e)}}),t.adProduct=function(){t.ad.siteByProductId="",C(t.ad.adProductId),t.ad.channelBySiteSelection="",t.channelBySiteEl=!1,v(),t.ad.channelBySites=[],t.ad.priceType=""},t.channelBySiteEl=!1,t.siteByProductChange=function(){t.channelBySiteEl=!0,v(),t.ad.positionByAreaSelection="",S(),y(t.ad.siteByProductId),t.ad.priceType=""},t.channelChange=function(){t.ad.channelBySiteSelection?h(t.ad.channelBySiteSelection):(t.ad.areaByChannels=[],t.ad.positionByAreas=[],f(),t.ad.priceType=""),t.ad.areaByChannelSelection="",t.ad.positionByAreaSelection=""},t.areachange=function(){t.ad.areaByChannelSelection?T(t.ad.areaByChannelSelection):(t.ad.positionByAreas=[],t.ad.selection="",f()),t.ad.positionByAreaSelection=""},t.positionChange=function(){t.ad.positionByAreaSelection?I():(f(),t.ad.priceType=""),S(),t.ad.positionChangeValidator=!1,t.ad.materialValidator=!1},t.$watch("ad.selection",function(a){if(a){var e=t.ad.adProductId,o=t.ad.siteByProductId;t.ad.industrySelected=void 0,g(e,o,a),2==a&&null==t.ad.quotes.reachEstimate&&null==t.ad.quotes.quoteTatioThird&&(t.ad.quotes.reachEstimate=0,t.ad.quotes.quoteTatioThird=0)}t.ad.quotesValidator=!1}),t.$watch("ad.quotes.cpsCustomersType",function(a){if(a){t.ad.sharedRevenue=!0;for(var e=t.quotesData.length,o=0;e>o;o++){var i=t.quotesData[o];if(i.industryType==a){if(i.ratioMine){t.ad.quotesMine=i.ratioMine;break}t.ad.quotesMine=""}else t.ad.quotesMine=""}}}),t.$watch("ad.quotes.customers",function(a){if(a){var e=t.ad.selection;1===e?I():D()}else t.ad.quotes.cptCotalPrice="",t.ad.quotes.cpcCotalPrice=""}),t.$watch("ad.totalDays",function(a){a?(D(),I(),B()):(t.ad.quotes.cpmCountTotal="",t.ad.quotes.cpcCotalPrice="",t.ad.quotes.cptCotalPrice="")}),t.$watch("ad.quotes.dayTotal",function(a){a||0===a?B():t.ad.quotes.cpmCountTotal=""});var C=function(a){p.getSiteList({productId:a}).success(function(a){200===a.code&&(t.ad.siteByProducts=a.data.length?a.data:[])})};o.get({},function(a){200===a.code&&(t.atTypes=a.data.result)});var v=function(){t.ad.priceType="",t.ad.selection="",t.ad.channelBySiteSelection="",t.ad.areaByChannelSelection="",t.ad.positionByAreaSelection="",t.ad.hiddenElValidator=!1,t.ad.areaByChannels=[],t.ad.positionByAreas=[]},y=function(a){var e=t.ad.adProductId;p.getChannelList({productId:e,siteId:a}).success(function(a){200===a.code&&(t.ad.channelBySites=a.data)})},h=function(a){p.getAreaList({parentId:a}).success(function(a){200===a.code&&(t.ad.areaByChannels=a.data)})},T=function(a){p.getAreaList({parentId:a.id}).success(function(a){200===a.code&&(t.ad.positionByAreas=a.data)})},f=function(){t.ad.selection="",t.ad.quotes.customers="",t.ad.quotes.discount="",t.ad.quotes.cptCotalPrice="",t.ad.quotes.cpcCotalPrice="",t.ad.quotesMine="",t.ad.quotes.quoteTatioMine="",t.ad.quotes.quoteTatioMt="",t.ad.conditionDesc="",t.ad.quotes.cpsCustomersType="",t.ad.quotes.cpmCountTotal="",t.ad.sharedRevenue=!1,t.ad.quotes.adCpBudget="",t.ad.quotes.reachEstimate=0,t.ad.quotes.quoteTatioThird=0},S=function(){t.ad.codeStatues=0,t.ad.materialTitle="",t.ad.materialUrl="",t.ad.advertiseMaterials=[],t.ad.codeContent="",t.ad.timeBuckets=[{}],t.ad.adDaysEles=[],t.ad.adTimeCheckallModel="",t.ad.totalDays="",t.insertDays=""};t.quoteTatioMine=function(){var a=t.ad.quotes.quoteTatioMine,e=t.ad.quotes.quoteTatioThird;parseInt(e)?t.ad.quotes.quoteTatioMine=Number(a).toFixed(2):a||0===a?(a=Number(a),a||0===a?(t.ad.quotes.quoteTatioMt=(100-a).toFixed(2),t.ad.quotes.quoteTatioMine=a.toFixed(2)):t.ad.quotes.quoteTatioMt=""):(t.ad.quotes.quoteTatioMt="",t.ad.quotes.quoteTatioMine="")},t.quoteTatioMt=function(){var a=t.ad.quotes.quoteTatioMt,e=t.ad.quotes.quoteTatioThird;parseInt(e)?t.ad.quotes.quoteTatioMt=Number(a).toFixed(2):a||0===a?(a=Number(a),a||0===a?(t.ad.quotes.quoteTatioMine=(100-a).toFixed(2),t.ad.quotes.quoteTatioMt=a.toFixed(2)):t.ad.quotes.quoteTatioMine=""):(t.ad.quotes.quoteTatioMt="",t.ad.quotes.quoteTatioMine="")},t.quoteTatioThird=function(){var a=Number(t.ad.quotes.quoteTatioThird);a&&(t.ad.quotes.quoteTatioThird=a.toFixed(2))},t.ad.codeStatues=0;var M=function(a,e){d.post({advertisingPlatformId:a,siteId:e}).success(function(a){if(200===a.code){var e=a.data.result;e&&e.length>0?(t.ad.quotes.ratioCustomer=e[0].ratioCustomer?e[0].ratioCustomer:0,t.ad.quotes.ratioMine=e[0].ratioMine?e[0].ratioMine:0,t.ad.quotes.ratioThird=e[0].ratioThird?e[0].ratioThird:0):(t.ad.quotes.ratioCustomer="",t.ad.quotes.ratioMine="",t.ad.quotes.ratioThird="")}})};t.ad.quotesMineState=!0,t.ad.sharedRevenue=!1,publishPricesState=!1,t.quotesData=[],t.ad.codeContent="";var g=function(a,e,o){d.post({advertisingPlatformId:a,siteId:e,billingModelId:o},function(a){200===a.code&&(a.data.result&&a.data.result.length>0?(t.quotesData=a.data.result,t.ad.quotes.publishPrices=a.data.result[0].publishPrice,publishPricesState=!0,t.ad.dollerIcon=!0):(t.ad.quotes.publishPrices="",publishPricesState=!1,t.ad.dollerIcon=!1,t.ad.quotes.discount=1),D(),I())})};t.customersQuote=function(){if(publishPricesState){var a=t.ad.quotes.customers;if(a){a=Number(a);var e=t.ad.quotes.publishPrices;e&&(t.ad.quotes.discount=a?(a/e).toFixed(2):"")}else t.ad.quotes.discount="",t.ad.quotes.cptCotalPrice="",t.ad.quotes.cpcCotalPrice=""}},t.discountQuote=function(){if(publishPricesState){var a=t.ad.quotes.discount;if(a){a=Number(a);var e=t.ad.quotes.publishPrices;t.ad.quotes.customers=a?(a*e).toFixed(2):""}else t.ad.quotes.customers="",t.ad.quotes.cptCotalPrice="",t.ad.quotes.cpcCotalPrice=""}};var D=function(){var a=Number(t.ad.quotes.customers),e=t.ad.totalDays;e&&a&&(t.ad.quotes.cptCotalPrice=e*a)},I=function(){var a=t.ad.quotes.customers,e=t.ad.positionByAreaSelection.click;if(a&&e){a=Number(a);var o=t.ad.totalDays;t.ad.quotes.cpcCotalPrice=a&&o?(o*a*e).toFixed(2)||"":""}},B=function(){var a=Number(t.ad.quotes.dayTotal),e=t.ad.totalDays;t.ad.quotes.cpmCountTotal=a&&e?a*e:""};t.adPrice=function(){t.ad.quotesValidator=!1,f()},t.adBonus=function(){f(),t.ad.selection="",t.ad.quotesValidator=!1;var a=t.ad.adProductId,e=t.ad.siteByProductId;a&&e&&M(a,e)},t.ad.codeContentVaChange=function(){t.ad.codeContentValidator=!1},t.ad.deleCodeContent=function(){t.ad.codeContent=""},t.adContentSave=function(o,d){if(o=o.$valid,t.ad.contentSave=!0,t.ad.hiddenElValidator=!0,t.ad.positionChangeValidator=!0,t.ad.quotesValidator=!0,!o)return void t.anchorTo(d);if(1==t.ad.priceType||2==t.ad.selection){var r=Number(t.ad.quotes.quoteTatioMine)+Number(t.ad.quotes.quoteTatioMt)+Number(t.ad.quotes.quoteTatioThird);if(100!=r)return void e.alert({content:a("translate")("AD_CONTENT_RATIOTOTALPRICE_ERROR")})}var s={adSolutionContent:{adSolutionId:t.programId,advertiser:t.ad.CustomersName.value,description:t.ad.companyDescribe,productId:t.ad.adProductId,siteId:t.ad.siteByProductId,channelId:t.ad.channelBySiteSelection,areaId:t.ad.areaByChannelSelection.id,positionId:t.ad.positionByAreaSelection.id,materialType:~~t.ad.positionByAreaSelection.materialType}};t.ad.CustomersName.data&&(s.adSolutionContent.advertiserId=t.ad.CustomersName.data);var u=Number(t.ad.priceType),l=+t.ad.quotes.reachEstimate;if(u)angular.extend(s,{advertiseQuotation:{priceType:1,productRatioMine:t.ad.quotes.ratioMine,productRatioCustomer:t.ad.quotes.ratioCustomer,productRatioThird:t.ad.quotes.ratioThird,ratioMine:t.ad.quotes.quoteTatioMine,ratioCustomer:t.ad.quotes.quoteTatioMt,ratioThird:t.ad.quotes.quoteTatioThird,reachEstimate:!!l,ratioConditionDesc:t.ad.conditionDesc}});else{switch(t.ad.selection){case 1:angular.extend(s,{advertiseQuotation:{priceType:0,billingModelId:1,publishPrice:t.ad.quotes.publishPrices,customerQuote:t.ad.quotes.customers,trafficAmount:t.ad.positionByAreaSelection.pv,clickAmount:t.ad.positionByAreaSelection.click,discount:t.ad.quotes.discount,budget:t.ad.quotes.adCpBudget,totalPrice:t.ad.quotes.cpcCotalPrice}});break;case 3:angular.extend(s,{advertiseQuotation:{priceType:0,billingModelId:3,publishPrice:t.ad.quotes.publishPrices,customerQuote:t.ad.quotes.customers,discount:t.ad.quotes.discount,budget:t.ad.quotes.adCpBudget}});break;case 5:angular.extend(s,{advertiseQuotation:{priceType:0,billingModelId:5,publishPrice:t.ad.quotes.publishPrices,customerQuote:t.ad.quotes.customers,discount:t.ad.quotes.discount,budget:t.ad.quotes.adCpBudget,totalPrice:t.ad.quotes.cptCotalPrice}});break;case 2:angular.extend(s,{advertiseQuotation:{priceType:0,billingModelId:2,industryType:t.ad.industrySelected,productRatioMine:t.ad.quotesMine,ratioMine:t.ad.quotes.quoteTatioMine,ratioCustomer:t.ad.quotes.quoteTatioMt,ratioThird:t.ad.quotes.quoteTatioThird,reachEstimate:!!l,ratioConditionDesc:t.ad.conditionDesc}});break;case 4:angular.extend(s,{advertiseQuotation:{priceType:0,billingModelId:4,publishPrice:t.ad.quotes.publishPrices,customerQuote:t.ad.quotes.customers,discount:t.ad.quotes.discount,dailyAmount:t.ad.quotes.dayTotal,totalAmount:t.ad.quotes.cpmCountTotal,budget:t.ad.quotes.adCpBudget}})}publishPricesState||(s.advertiseQuotation.publishPrice="")}switch(~~t.ad.positionByAreaSelection.materialType){case 0:s.adSolutionContent.materialUrl=t.ad.materialUrl,s.advertiseMaterials=t.ad.advertiseMaterials;break;case 1:s.adSolutionContent.materialTitle=t.ad.materialTitle,s.adSolutionContent.materialUrl=t.ad.materialUrl;break;case 2:s.adSolutionContent.materialTitle=t.ad.materialTitle,s.adSolutionContent.materialUrl=t.ad.materialUrl,s.advertiseMaterials=t.ad.advertiseMaterials}s.periods=t.ad.timeBuckets,s.insertDate=t.ad.adDaysEles,t.adSolutionContentId&&(s.adSolutionContent.id=t.adSolutionContentId,s.advertiseQuotation.id=t.advertiseQuotationId),t.ad.oldContentId&&(s.adSolutionContent.oldContentId=t.ad.oldContentId),t.ad.materailCodeUploaded&&(s.advertiseCodeMaterial=t.ad.materailCodeUploaded,s.advertiseCodeMaterial.adSolutionContentId=t.adSolutionContentId),i.save(s,function(o){if(200===o.code){t.ad.review=!0,t.$parent.$parent.$parent.stateEditing=!1;var d=o.data.adSolutionContent.id;i.getSingle({id:d},function(a){t.ad.reviewData=a.data,t.ad.canUpdate=!0,t.adSolutionContentId=a.data.adSolutionContent.id,t.ad.advertiseMaterials=a.data.advertiseMaterials,t.advertiseQuotationId=a.data.advertiseQuotation.id,t.ad.reviewData.adSolutionContent=a.data.adSolutionContent,t.ad.reviewData.adSolutionContent.areaRequired=m(a.data.positionVOList,a.data.adSolutionContent.positionId,"areaRequired"),t.ad.reviewData.adSolutionContent.size=m(a.data.positionVOList,a.data.adSolutionContent.positionId,"size"),t.ad.reviewData.materialType=~~m(a.data.positionVOList,a.data.adSolutionContent.positionId,"materialType"),t.ad.reviewData.advertiseQuotation.billingModelName=m(t.atTypes,a.data.advertiseQuotation.billingModelId,"i18nName")})}else if(204===o.code){for(var r=function(a){for(var e=0;e<t.ads.length;e++)if(t.ads[e].reviewData&&t.ads[e].reviewData.adSolutionContent.id===~~a)return e;return-1},s=function(t){for(var e=0;e<t.length;e++)t[e]=t[e]?a("translate")("AD_CONTENT_TITLE")+(r(t[e])+1):a("translate")("AD_CONTENT_CURRENT");return t},u=[],l=0;l<o.errorList.length;l++)u.push(n.translate(o.errorList[l].key,s(o.errorList[l].args)));e.alert({contentList:u})}})},t.ad.advertiseMaterials=[],t.removeMaterial=function(a){var e=t.ad.advertiseMaterials;e[a].id&&i.deleMaterials({id:e[a].id},function(){}),t.ad.advertiseMaterials.splice(a,1)},t.$watch("ad.materailUploaded",function(a){a&&(t.ad.advertiseMaterials=t.ad.advertiseMaterials||[],t.ad.advertiseMaterials.push(a))}),t.adContentCancelEditing=function(){e.confirm({content:a("translate")("AD_CONTENT_CANCEL_EDIT")},function(){t.ad.editing=!1,t.ad.review=!0,t.$parent.$parent.$parent.stateEditing=!1})},t.adContentModify=function(){return t.ad.reviewData.adSolutionContent.id?(t.ad.editing=!0,t.$parent.$parent.$parent.stateEditing=!0,void i.getSingle({id:t.ad.reviewData.adSolutionContent.id},function(a){function e(t){var a,e=[];if(""!==t){timesArray=t.split(";");var o=timesArray.length;for(a=0;o>a;a++)e.push({date:timesArray[a],checked:!0});return e}}function o(t){var a,e=[],o=[];if(""!==t){timesArray=t.split(";");var i=timesArray.length;for(a=0;i>a;a++)e=timesArray[a].split(","),e.length>1?o.push({from:e[0],to:e[1]}):timesArray[a]&&o.push({from:timesArray[a],to:timesArray[a]});return o}}t.ad.review=!1,t.ad.CustomersName={value:a.data.adSolutionContent.advertiser,data:a.data.adSolutionContent.advertiserId},t.ad.companyDescribe=a.data.adSolutionContent.description,t.$parent.$parent.$parent.adSolutionTypeUpdate&&"update"===a.data.adSolutionContent.contentType&&(t.ad.calendarFutureOnly=!0),t.ad.oldContentId=a.data.adSolutionContent.oldContentId,t.programId=a.data.adSolutionContent.adSolutionId,t.adSolutionContentId=a.data.adSolutionContent.id,t.advertiseQuotationId=a.data.advertiseQuotation.id,t.ad.products=a.data.adPlatformList,t.ad.adProductId=a.data.adSolutionContent.productId,t.ad.siteByProducts=a.data.siteList,t.ad.siteByProductId=a.data.adSolutionContent.siteId,t.ad.channelBySites=a.data.channelVOList,t.ad.channelBySiteSelection=a.data.adSolutionContent.channelId,t.ad.areaByChannels=a.data.areaVOList;var i=a.data.adSolutionContent.areaId;t.ad.areaByChannelSelection=m(a.data.areaVOList,i),t.ad.positionByAreas=a.data.positionVOList;var d=a.data.adSolutionContent.positionId;t.ad.positionByAreaSelection=m(a.data.positionVOList,d),t.ad.timeBuckets=o(a.data.adSolutionContent.periodDescription),t.ad.adDaysEles=e(a.data.adSolutionContent.insertPeriodDescription)||[],q(t.ad.positionByAreaSelection,t.ad.timeBuckets,t.ad.adDaysEles),t.ad.adTimeCheckallModel=!0,t.ad.adDaysEles?t.insertDays=t.ad.adDaysEles.length:t.ad.adDaysEles=[],t.ad.totalDays=a.data.adSolutionContent.totalDays,t.ad.quotes.publishPrice=a.data.advertiseQuotation.publishPrice;var n=a.data.advertiseQuotation.priceType;t.ad.priceType="unit"==n?"0":"1",t.ad.selection=a.data.advertiseQuotation.billingModelId,t.ad.quotes.customers=a.data.advertiseQuotation.customerQuote,t.ad.quotes.discount=a.data.advertiseQuotation.discount,t.ad.quotes.adCpBudget=a.data.advertiseQuotation.budget,t.ad.quotes.cpcCotalPrice=a.data.advertiseQuotation.totalPrice,t.ad.sharedRevenue=!0,t.ad.quotes.cpsCustomersType=a.data.advertiseQuotation.industryType,t.ad.quotes.quoteTatioMt=a.data.advertiseQuotation.ratioCustomer,t.ad.quotes.quoteTatioMine=a.data.advertiseQuotation.ratioMine,t.ad.quotes.quoteTatioThird=a.data.advertiseQuotation.ratioThird,t.ad.quotes.reachEstimate=a.data.advertiseQuotation.reachEstimate,t.ad.conditionDesc=a.data.advertiseQuotation.ratioConditionDesc,t.ad.quotesMine=a.data.advertiseQuotation.productRatioMine,t.ad.quotes.dayTotal=a.data.advertiseQuotation.dailyAmount,t.ad.quotes.cpmCountTotal=a.data.advertiseQuotation.totalAmount,t.ad.quotes.ratioMine=a.data.advertiseQuotation.productRatioMine?a.data.advertiseQuotation.productRatioMine:"",t.ad.quotes.ratioCustomer=a.data.advertiseQuotation.productRatioCustomer?a.data.advertiseQuotation.productRatioCustomer:"",t.ad.quotes.ratioThird=a.data.advertiseQuotation.productRatioThird?a.data.advertiseQuotation.productRatioThird:"";var r=+t.ad.positionByAreaSelection.materialType;0===r?t.ad.advertiseMaterials=a.data.advertiseMaterials:1===r?t.ad.materialTitle=a.data.adSolutionContent.materialTitle:2===r&&(t.ad.materialTitle=a.data.adSolutionContent.materialTitle,t.ad.advertiseMaterials=a.data.advertiseMaterials),t.ad.materialUrl=a.data.adSolutionContent.materialUrl,t.ad.materailCodeUploaded=a.data.advertiseCodeMaterial,l(function(){t.ad.industrySelected=a.data.advertiseQuotation.industryType,t.selectIndusty(t.ad)},1e3)})):!1},t.isSaveBtnDisabled=!1,t.btnDisabled=function(){t.isSaveBtnDisabled=!0},t.btnEnabled=function(){t.isSaveBtnDisabled=!1},t.btnApprovalRecord=function(t){r.forContent(t.reviewData.adSolutionContent.id,{windowClass:"approval-record-modal"})},t.selectIndusty=function(a){t.quotesData&&t.quotesData.length||(t.ad.quotesMine=void 0);for(var e=0;e<t.quotesData.length;e++){if(void 0===t.quotesData[e].industryId){t.ad.quotesMine=t.quotesData[e].ratioMine;break}if(t.quotesData[e].industryId===~~a.industrySelected){t.ad.quotesMine=t.quotesData[e].ratioMine;break}t.ad.quotesMine=void 0}},t.codeUploaded=function(t){l(function(){t.materailCodeUploaded&&t.materailCodeUploaded})},t.removeCodeUploaded=function(t){t.materailCodeUploaded=null}}])});