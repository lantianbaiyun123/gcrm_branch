define(["app","../_common/ytCommon","./CtrlAddUser","./CtrlAddDataAuthority"],function(t){t.registerController("CtrlUserDetail",["$scope","User","$stateParams","$window","$modal","STATIC_DIR",function(t,e,a,s,n,r){function o(){e.getDetail({id:a.ucId}).success(function(e){200===e.code&&(t.userVO=e.data.userVO,t.uc={username:e.data.userVO.username,roleName:e.data.roleName,posParent:e.data.posParent,posSub:e.data.posSub,position:e.data.position},t.dataAuthority={businessTypes:e.data.businessTypes,platforms:e.data.platforms,sites:e.data.sites,hasDataRights:e.data.hasDataRights},t.newRightsURL=e.data.newRightsURL)})}return a.ucId?(o(),t.changeRole=function(){t.newRightsURL&&s.open(t.newRightsURL)},t.btnEditUser=function(){n.open({templateUrl:r+"app/admin/addUser.tpl.html",controller:"CtrlAddUser",resolve:{opts:function(){return{type:"edit",rowData:t.userVO}}}})},void(t.btnEditDataAuthority=function(){var e=n.open({templateUrl:r+"app/admin/addDataAuthorityModal.tpl.html",controller:"CtrlAddDataAuthority",resolve:{opts:function(){return{type:"edit",username:t.userVO.username}}}});e.result.then(function(){o()})})):!1}])});