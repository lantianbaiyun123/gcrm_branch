define(["app","../_common/ytCommon","../_services/PageSet","../_services/http/BenchmarkPrice"],function(e){e.registerController("CtrlBenchmarkPriceCurrent",["$scope","$log","PageSet","BenchmarkPrice",function(e,s,t,n){function i(s){n.currentList({businessType:e.currentBusinessType,advertisingPlatformId:s}).success(function(s){if(200===s.code){e.currentQuotation=s.data;for(var t=e.currentQuotation.quotationList,n=t.length,i=0;n>i;i++){var r=t[i];if(r.cps&&r.cps.length){var a=r.cps,c=a.length;if(1!==c||a[0].industryName){r.differentCPS={};for(var o=0;c>o;o++){var u=e.constant.industryType[a[o].industryId].parentName;r.differentCPS[u]||(r.differentCPS[u]=[]),r.differentCPS[u].push(a[o])}}else r.unifiedCPS=a[0]}}console.log(t)}})}t.set({activeIndex:1,siteName:"benchmarkPriceCurrent"}),n.currentPlatform().success(function(s){200===s.code&&(e.businessTypes=s.data,e.businessTypes.length&&(e.setBusinessType(e.businessTypes[0]),e.selectPlatform(e.businessTypes[0].platformList[0])))}),e.setBusinessType=function(s){e.currentBusinessType=s.businessTypeName,e.selectPlatform(s.platformList[0])},e.selectPlatform=function(s){for(var t in e.businessTypes){if(e.businessTypes[t].platformList&&e.businessTypes[t].platformList.length)for(var n=e.businessTypes[t].platformList.length-1;n>=0;n--)e.businessTypes[t].platformList[n].active=!1;s.active=!0}i(s.id)}}])});