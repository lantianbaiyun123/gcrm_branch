define(["app","../_common/ytCommon","../_services/http/Industry","../_filters/QuotationStatusFilter","../_filters/BusinessTypeFilter","../_filters/QuotationApprovalStatusFilter","../_filters/PriceTypeFilter"],function(e){e.registerController("CtrlBenchmarkPriceManagement",["$scope","$log","$state","$q","PageSet","BenchmarkPriceConstant","Position",function(e,t,a,r,n,s,i){e.msgs={},e.msgs.listAlerts=[],e.msgs.detailAlerts=[],e.constantIsSet=!1,s.then(function(t){e.constant=t,e.constantIsSet=!0,e.$broadcast("constantReady",e.constant)}),e.getSiteArea=function(e){var t=r.defer();return e&&i.getQuoteSiteArea({platformId:e}).success(function(e){var a=[];if(200===e.code){var r=e.data.length;if(r)for(var n=0;r>n;n++)a.push({text:e.data[n].value,value:e.data[n].data})}t.resolve(a)}),t.promise}}]),e.registerService("BenchmarkPriceConstant",["$filter","$q","Position","BillModel","Industry",function(e,t,a,r,n){function s(){var e=t.defer();return a.getQuoteAllPlatform().success(function(t){if(200===t.code){var a=t.data.length;if(a)for(var r=["CASH","SALE"],n=0;a>n;n++)A.platform.push({text:t.data[n].i18nName,value:t.data[n].id,businessType:r[t.data[n].businessType]})}e.resolve()}),e.promise}function i(){var e=t.defer();return r.get({},function(t){if(200===t.code){var a=t.data.result.length;if(a)for(var r=0;a>r;r++)A.billingModel[t.data.result[r].id]=t.data.result[r]}e.resolve()}),e.promise}function o(){var e=t.defer();return n.getIndustryTypes({}).success(function(t){if(200===t.code){for(var a={},r=t.data.length,n=0;r>n;n++){var s=t.data[n],i=s.id,o=s.industryTypeName;if("subIndustryType"in s)for(var l=s.subIndustryType,u=(l.length,0);r>u;u++)l[u].parentId=i,l[u].parentName=o,a[l[u].id]=l[u];else s.parentId=i,s.parentName=o,a[s.id]=s}A.industryType=a}e.resolve()}),e.promise}var l=t.defer(),u=e("translate"),A={platform:[],siteArea:[],quotationStatus:[{text:u("QUOTATION_STATUS_INVALID"),value:"INVALID"},{text:u("QUOTATION_STATUS_VALID"),value:"VALID"},{text:u("QUOTATION_STATUS_OVERDUE_INVALID"),value:"OVERDUE_INVALID"},{text:u("QUOTATION_STATUS_CANCEL"),value:"CANCEL"}],businessType:[{text:u("BUSINESS_TYPE_SALE"),value:"SALE"},{text:u("BUSINESS_TYPE_CASH"),value:"CASH"}],priceType:[{text:u("PRICE_TYPE_unit"),value:"unit"},{text:u("PRICE_TYPE_ratio"),value:"ratio"},{text:u("PRICE_TYPE_rebate"),value:"rebate"}],approvalStatus:[{text:u("QUOTATION_APPROVAL_STATUS_SAVING"),value:"SAVING"},{text:u("QUOTATION_APPROVAL_STATUS_APPROVING"),value:"APPROVING"},{text:u("QUOTATION_APPROVAL_STATUS_APPROVED"),value:"APPROVED"},{text:u("QUOTATION_APPROVAL_STATUS_CANCEL"),value:"CANCEL"}],billingModel:{},industryType:{}};return t.all([s(),i(),o()]).then(function(){l.resolve(A)}),l.promise}])});