define(["app","../_filters/BusinessTypeFilter","anuglar-ui-select2"],function(e){e.registerController("CtrlCustomerBasic",["$scope","$state","$stateParams","$timeout","Modal","Customer","Country",function(e,t,n,a,i,s,o){e.belongSalesSuggestOption=s.getBelongSalesSuggestOption({cbfn:function(t){return t&&t.id?void s.getBelongSalesLeader({salerId:t.id}).success(function(t){200===t.code&&(e.basic.belongManager=t.data)}):!1}}),e.countrySuggestOption=o.getSuggest({allowClear:!1}),e.agentCompanySuggestOption=s.getAgentCompanySuggestOption(),e.$watch("basic.agentRegional",function(t,n){var a=!n&&e.basic.agentCountrySelected&&e.basic.agentCountrySelected.length;t&&!a&&(e.basic.agentCountriesLoading=!0,e.basic.agentCountrySelected=[],e.basic.agentCountries=[],s.queryAgentCountries({id:t}).success(function(t){200===t.code&&(e.basic.agentCountries=t.data.agentCountries),e.basic.agentCountriesLoading=!1}))}),e.btnEdit=function(){e.tempBasic=angular.copy(e.basic),e.basic.state="detailEditing"},e.btnCancel=function(){angular.extend(e.basic,e.tempBasic,{state:"detailViewing"})},e.btnSave=function(){e.$emit("basicSave")},e.addAgentCompany=function(t){t&&s.addAgentCompany({companyName:t}).success(function(t){200===t.code&&(e.basic.agentCompany={id:t.data.id,name:t.data.companyName},e.basic.stateAddingAgent=!1)})}}])});