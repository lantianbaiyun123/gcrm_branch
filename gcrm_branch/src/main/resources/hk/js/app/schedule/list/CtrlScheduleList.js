define(["app","../../_services/Select2Suggest","../../_services/http/Customer","../../_services/http/Schedules","../../_filters/ScheduleListStatusFilter","../../_services/PageSet","../../_directives/ytInputDropdown","../../_directives/ytPositionSelect","anuglar-ui-select2"],function(e){e.registerController("CtrlScheduleList",["$scope","Customer","APP_CONTEXT","$http","Schedules","Select2Suggest","$filter","PageSet","ScheduleListConstant","$timeout","dateFilter","$window",function(e,t,a,r,u,i,n,o,s,d,l,S){o.set({activeIndex:2,siteName:"scheduleList"});var p={initQuery:function(){e.q={},e.queryTypes=s.queryTypes,e.queryStatusMap=s.queryStatusMap,e.queryType=e.queryTypes[0],e.queryStatus=e.queryStatusMap[0],e.optionCustomer=i.getCustomerOptionForAdOwner(),e.pager={pageNumber:1,pageSize:10,pageSizeSlots:[10,20,30,50],totalCount:0},d(function(){p.doQuery()})},doQuery:function(){u.getList(this.getQueryParams()).success(function(t){200===t.code&&(e.scheduleList=t.data.result,e.pager.totalCount=t.data.totalCount,e.pager.totalPages=t.data.totalPages)})},getQueryParams:function(){var t={queryType:e.q.queryType&&e.q.queryType.value,queryStr:e.q.queryString,scheduleStatus:e.q.queryStatus&&e.q.queryStatus.value,startDate:l(e.q.startDate,this.dateFormat),endDate:l(e.q.endDate,this.dateFormat),pageSize:e.pager.pageSize,pageNumber:e.pager.pageNumber};return e.q.positionSelected&&(t.platFormId=e.q.positionSelected.platform.id,t.siteId=e.q.positionSelected.site.id,t.channelId=e.q.positionSelected.channel.id,t.areaId=e.q.positionSelected.area.id,t.positionId=e.q.positionSelected.position.id),t},resetPageNumber:function(){e.pager.pageNumber=1},dateFormat:"yyyy-MM-dd"};p.initQuery(),e.$watch("pager.pageNumber",function(e,t){e&&t&&e!==t&&p.doQuery()}),e.toggleQueryMore=function(){e.queryMoreShow=!e.queryMoreShow},e.btnQuery=function(){p.resetPageNumber(),p.doQuery()},e.setPageSize=function(t){e.pager.pageSize=t,p.resetPageNumber(),p.doQuery()},e.navToContent=function(e){e.adContentId&&S.open("#/adContentDetail?id="+e.adContentId)}}]),e.registerService("ScheduleListConstant",["$filter",function(e){var t=e("translate");return{noContentWarn:t("AD_SOLUTION_LIST_NO_CONTENT"),queryStatusMap:[{i18nName:t("SCHEDULE_RESERVED"),value:"0"},{i18nName:t("SCHEDULE_CONFIRMED"),value:"1"},{i18nName:t("SCHEDULE_LOCKED"),value:"2"},{i18nName:t("SCHEDULE_RELEASED"),value:"3"}],queryTypes:[{i18nName:t("ADVERTISER"),value:"advertisers"},{i18nName:t("SCHEDULE_NUMBER"),value:"schedulenum"},{i18nName:t("SCHEDULE_LIST_AD_CONTENT_NUMBER"),value:"adcontentnum"}]}}])});