define(["app","../ServiceTaskHttp"],function(t){t.registerFactory("PubApplyApproval",["$stateParams","TaskHttp","Modal",function(t,e,a){return{init:function(e){e.form={},e.taskRecord={},e.taskRecord.foreignKey=t.applyId,e.taskRecord.activityId=t.activityId,e.taskRecord.processId=t.processId,e.taskRecord.type="onlineApply",e.applyId=e.taskRecord.foreignKey,e.taskRecord.foreignKey&&e.taskRecord.activityId?this.getInfo(e):e.updateTask(!0)},getInfo:function(t){var o=t.taskRecord;e.pubApplyApprovalInfo({onlineApplyId:o.foreignKey,activityId:o.activityId}).success(function(e){if(200===e.code)t.v=e.data,t.updateTask();else if(e.code>250){var o="["+e.code+"]"+e.message;a.alert({content:o})}else t.updateTask()})},submitApproval:function(t){return e.pubApplyApprovalSubmit(t)}}}])});