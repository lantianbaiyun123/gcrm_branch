define(["app"],function(t){t.registerController("CtrlCustomerContacts",["$scope","$state","$filter","$stateParams","$timeout","Modal","Customer",function(t,c,n,o,e,a,s){t.$on("customerAdd",function(){t.addRow()}),t.$on("customerDetail",function(c,n){t.contacts=n.contacts}),t.contact.genderTypes=["male","female","others"],t.addRow=function(){t.contact.contacts=t.contact.contacts||[];var c={isEditing:!0};t.basic.id&&(c.customerNumber=t.basic.id),t.contact.contacts.push(c)},t.removeRow=function(c,n){t.contact.contacts&&t.contact.contacts.length&&(c.id?s.removeContactor(c).success(function(c){200===c.code&&t.contact.contacts&&t.contact.contacts.length&&t.contact.contacts.splice(n,1)}):t.contact.contacts.splice(n,1))},t.setGenderType=function(t,c){t.gender=c},t.editRow=function(t){t.isEditing=!0},t.saveRow=function(t){return t.name?void s.saveContactor(t).success(function(c){200===c.code&&angular.extend(t,c.data,{isEditing:!1})}):(a.alert({content:n("translate")("CUSTOMER_INPUT_CONTACT")}),!1)}}])});