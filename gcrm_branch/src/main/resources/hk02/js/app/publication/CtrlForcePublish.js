define(["app"],function(a){a.registerController("CtrlForcePublish",["$scope","$log","$modalInstance","$filter","$q","Utils","Material","opts",function(a,b,c,d,e,f,g,h){function i(){var b=j(),c=!0,d=!0;return(1===~~a.adContentInfo.materialType||2===~~a.adContentInfo.materialType)&&(d=k()),(0===~~a.adContentInfo.materialType||2===~~a.adContentInfo.materialType)&&(c=l()),b&&d&&c}function j(){return a.checkingUrl=!0,!!a.editData.materialApply.materialUrl&&f.urlValidator(a.editData.materialApply.materialUrl)}function k(){return a.checkingTitle=!0,!!a.editData.materialApply.materialTitle}function l(){return a.checkingMaterialList=!0,!!a.editData.imageList.length}function m(){a.editData.codeFile.materialFileType="EMBED_CODE";for(var b=a.editData.imageList.length-1;b>=0;b--)a.editData.imageList[b].materialFileType="IMAGE";a.editData.materialApply.adSolutionContentId=a.adContentInfo.adContentId}a.title=h.title,b.info(h),a.adContentInfo=h.adContentInfo,a.editData={},a.editData.materialSaveType=h.saveType,a.editData.imageList=h.materialData.imageList||[],a.editData.codeFile=h.materialData.codeFile||{},a.editData.materialApply=h.materialData.materialApply||{},a.codeUploadOpts={uploadedText:d("translate")("MATERIAL_UPLOAD_CODE_FILE"),formatErrorText:"UPLOAD_FILE_TYPE_FORBIDDEN"},a.materialUploadOpts={uploadedText:d("translate")("MATERIAL_UPLOAD_MATERIAL"),formatErrorText:"UPLOAD_FILE_TYPE_FORBIDDEN"},a.beginUpload=function(){a.submitDisabled=!0},a.uploaded=function(){a.submitDisabled=!1},a.removeCodeFile=function(){a.editData.codeFile={}},a.removeMaterial=function(b){a.editData.imageList.splice(b,1)},a.cancel=function(){c.dismiss("cancel")},a.ok=function(){if(a.submitDisabled=!0,i()){m();var b=g.save(a.editData);b.success(function(a){200===a.code&&c.close({btnType:"ok",response:a})}),b["finally"](function(){a.submitDisabled=!1})}else a.submitDisabled=!1}}])});