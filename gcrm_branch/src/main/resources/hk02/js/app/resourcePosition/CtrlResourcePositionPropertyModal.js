define(["app"],function(e){e.registerController("CtrlResourcePositionPropertyModal",["$scope","opts","$modalInstance","Modal","Position","$filter",function(e,t,a,i,n,o){var T=o("translate"),r=T("RESOURCE_POSITION_EDIT_PROPERTY_SUCCESS");"add"===t.type?(e.title=T("RESOURCE_POSITION_BUTTON_ADDPROPERTY"),r=T("RESOURCE_POSITION_ADD_PROPERTY_SUCCESS")):"view"===t.type?(e.title=T("RESOURCE_POSITION_BUTTON_VIEWPROPERTY"),e.stateViewing=!0,n.queryPosition({id:t.rowData.id}).success(function(t){200===t.code&&(e.e=angular.extend(e.e,t.data))})):"edit"===t.type?(e.title=T("RESOURCE_POSITION_BUTTON_MODIFYPROPERTY"),e.rotationTypeDisable=!0,n.queryPosition({id:t.rowData.id}).success(function(t){200===t.code&&(e.e=angular.extend(e.e,t.data))})):"batch"===t.type&&(e.title=T("RESOURCE_POSITION_BUTTON_BATCHMODIFYPROPERTY"),e.batchModifyProperty=!0,n.hasProperty({id:t.rowData.id}).success(function(t){200===t.code&&(e.notPropertyYet=!t.data)})),e.e={},e.e.rotationTypes=[{id:1,name:T("POSITION_TYPE_ROTATION")},{id:0,name:T("POSITION_TYPE_STATIC")}],e.e.materialTypes=[{id:0,name:T("POSTIION_MATERIAL_TYPE_IMAGE")},{id:1,name:T("POSTIION_MATERIAL_TYPE_TEXT")},{id:2,name:T("POSTIION_MATERIAL_TYPE_IMAGE_AND_TEXT")}],e.ok=function(){if(e.myFormValidating=!0,angular.isDefined(e.e.rotationType)&&angular.isDefined(e.e.materialType)&&(e.e.salesAmount||"batch"===t.type)){var o=angular.copy(e.e);delete o.rotationTypes,delete o.materialTypes,0===e.e.materialType?delete o.textlinkLength:1===e.e.materialType&&(delete o.size,delete o.areaRequired),o.id=t.rowData.id,n.updatePositionProperty(o).success(function(t){200===t.code?(a.close(),i.success({content:r})):204===t.code&&(e.salesAmountDisable=!0)})}},e.cancel=function(){a.dismiss("cancel")},e.rotationTypeChange=function(){e.myFormValidating=!1,e.e.rotationType||(e.e.salesAmount=1)},e.materialTypeChange=function(){e.myFormValidating=!1}}])});